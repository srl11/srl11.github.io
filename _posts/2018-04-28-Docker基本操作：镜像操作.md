---
layout: post
title: "Docker基本操作：镜像操作"
key: 2018-04-28-Docker1
categories:
  - Docker
tags:
  - Docker
---
[github-blog](https://xftony.github.io/docker/2018/04/28/%E9%97%AE%E9%A2%98&%E8%A7%A3%E5%86%B3-Docker%E4%B9%8BDOCKER_OPTS%E5%8F%82%E6%95%B0%E4%B8%8D%E7%94%9F%E6%95%88.html)  
[CSDN-blog](https://blog.csdn.net/xftony)  

#Docker 镜像基本操作  
##镜像生成/获取：  
### 1、远端获取：  

    $ docker pull  <image_name:tag>

### 2、Dockerfile生成：     

    $ docker build -t  <镜像名>  <Dockerfile路径> 

### 3、export方式(不会保留历史信息)把容器导出为tar包，然后导入为镜像("-o"可以使用”>“ 替换)   

	$ docker export <容器名>  -o  <tar包>
	$ docker import - <tar包>  <repository>:<tag>

### 4、save方式(保留历史信息)保存镜像为tar包("-o"可以使用”>“ 替换)    
	
	$ docker save <image ID> -o <tar包>
	$ docker load < <tar包>
	$ docker tag <Loaded image ID> <repository>:<tag>

### 5、docker commit 方式， 在原有镜像的基础上，再叠加上容器的存储层，并构成新的镜像     

    $ docker commit <容器ID> <repository>:<tag>


## 镜像上传：   
### 1、上传到DockerHub等开源仓库， 仓库中已建好 `repositoryPath` 

	$docker login
	$docker tag <imaeg name>:<tag1>  <repositoryPath>:<tag2>
	$docker push <repositoryPath>:<tag2>

### 2、上传到私有仓库   
 
    ##私有仓库建立：
    sudo docker run -d -p 5000:5000 registry     

	##将需要上传的<image name>:<tag> 重新打上一个新的tag
	$docker tag <image name>:<tag>  <repositoryIP:port>/path:<tag>   
	##push到仓库   
	$docker push <repositoryIP:port>/path:<tag>  
	##检查是否push成功  
	$curl http://<repositoryIP:port>/v2/test/tags/list  

[github-blog](https://xftony.github.io/docker/2018/04/28/%E9%97%AE%E9%A2%98&%E8%A7%A3%E5%86%B3-Docker%E4%B9%8BDOCKER_OPTS%E5%8F%82%E6%95%B0%E4%B8%8D%E7%94%9F%E6%95%88.html)    
[CSDN-blog](https://blog.csdn.net/xftony)  